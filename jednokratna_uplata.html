<!DOCTYPE html>
<html>

    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <!-- <script src="jquery-3.5.1.min.js"></script> -->
        <!-- <script src="fancybox/jquery.fancybox.min.js"></script> -->
        <!-- <script src="js/canvasjs.min.js"></script> -->
        <!-- <script src="jednokratna_uplata.js" type="module"></script> -->
        <!-- <link rel="stylesheet" href="fancybox/jquery.fancybox.css"> -->
        <!-- <link rel="stylesheet" href="style.css"> -->
        <script>
            jQuery(document).ready(function () {

                // $('#btnMesecno').click(function () {
                //
                //         // alert(inputUkupnoUplacenoClanaMes.value);
                //
                //     renderanjePie();
                // });
                const ranges = document.querySelectorAll(".form-inner-part .range");
                const inputs = document.querySelectorAll(".form-inner-part .input");
                const outputs = document.querySelectorAll(".form-inner-part .bubble");
                ranges.forEach(function (range, index) {
                    range.addEventListener("input", function (event) {
                        inputs[index].value = event.target.value ? event.target.value : "0";
                    });
                    inputs[index].addEventListener("input", function (event) {
                        ranges[index].value = event.target.value ? event.target.value : "0";
                        outputs[index].value = event.target.value ? event.target.value : "0";
                    });
                });

                $('[data-quantity="plus"]').click(function (e) {
                    e.preventDefault();
                    var fieldName = $(this).attr('data-field');
                    var fieldRange = parseInt($('input[name=' + fieldName + ']').attr('step'));
                    var fieldMax = parseInt($('input[name=' + fieldName + ']').attr('max'));
                    var currentVal = parseInt($('input[name=' + fieldName + ']').val());
                    var currentValOutput = parseInt($('output[name=' + fieldName + ']').val());

                    if (currentVal < fieldMax) {
                        $('input[name=' + fieldName + ']').val(currentVal + fieldRange);
                        $('output[name=' + fieldName + ']').val(currentValOutput + fieldRange);
                    }
                });
                $('[data-quantity="minus"]').click(function (e) {
                    e.preventDefault();
                    var fieldName = $(this).attr('data-field');
                    var fieldRange = parseInt($('input[name=' + fieldName + ']').attr('step'));
                    var currentVal = parseInt($('input[name=' + fieldName + ']').val());
                    var currentValOutput = parseInt($('output[name=' + fieldName + ']').val());

                    if (!isNaN(currentVal) && currentVal > 0) {
                        $('input[name=' + fieldName + ']').val(currentVal - fieldRange);
                        $('output[name=' + fieldName + ']').val(currentValOutput - fieldRange);
                    } else {
                        $('input[name=' + fieldName + ']').val(0);
                        $('output[name=' + fieldName + ']').val(0);
                    }
                });


                var allRanges = document.querySelectorAll(".form-inner-part");
                allRanges.forEach(function (wrap) {
                    var range = wrap.querySelector(".form-inner-part .range");
                    var bubble = wrap.querySelector(".form-inner-part .bubble");
                    var input = wrap.querySelector(".form-inner-part .input");
                    // var fieldMax = wrap.querySelector(".form-inner-part .input").attr('data-field');
                    // var fieldMin = wrap.querySelector(".form-inner-part .input").attr('data-field');

                    input.addEventListener("input", function () {
                        setBubbleInput(input, bubble);
                    });
                    setBubbleInput(input, bubble);

                    range.addEventListener("input", function () {
                        setBubbleRange(range, bubble);
                    });
                    setBubbleRange(range, bubble);
                });

                function setBubbleRange(range, bubble) {
                    var val = range.value;
                    var min = range.min ? range.min : 0;
                    var max = range.max ? range.max : 100;
                    var newVal = Number((val - min) * 100 / (max - min));
                    bubble.innerHTML = val;

                    // Sorta magic numbers based on size of the native UI thumb
                    bubble.style.left = "calc(" + newVal + "% + (" + (20 - newVal * 0.4) + "px))";
                }

                function setBubbleInput(input, bubble) {
                    var val = input.value;
                    var min = input.min ? input.min : 0;
                    var max = input.max ? input.max : 100;
                    var newVal = Number((val - min) * 100 / (max - min));
                    bubble.innerHTML = val;

                    // Sorta magic numbers based on size of the native UI thumb
                    bubble.style.left = "calc(" + newVal + "% + (" + (20 - newVal * 0.4) + "px))";
                }


            });
        </script>
    </head>

    <body>
        <div class="calculator-container brown-input">
            <div class="title">
                <h1>jednokratna uplata</h1>
                <p>Poštovani, Da biste izračunali iznos akumuliranih sredstava, potrebno je uneti iznos mesečnog doprinosa,
                    broj godina uplate i stopu očekivanog prinosa.
                </p>
            </div>
            <div class="calculator-page-wrap">
                <div class="calculator-form-wrap">
                    <div class="form-left">
                        <div class="form-inner">
                            <div class="form-inner-part left">
                                <div class="input-group plus-minus-input">
                                    <div class="input-group-button">
                                        <button type="button" class="button-minus" data-quantity="minus" data-field="rangeIznosUplateJed">
                                        </button>
                                    </div>
                                    <div class="range-wrap">
                                        <output class="bubble" name="rangeIznosUplateJed"></output>
                                        <input class="range input-group-field" type="range" id="rangeIznosUplateJed" name="rangeIznosUplateJed" min="0" max="1500000" value="1000" step="5000">
                                    </div>
                                    <div class="input-group-button">
                                        <button type="button" class="button-plus" data-quantity="plus" data-field="rangeIznosUplateJed">
                                        </button>
                                    </div>
                                    <div>
                                        <input class="input" name="rangeIznosUplateJed" type="number" id="inputIznosUplateJed" min="0" max="1500000" value="1000" />
                                    </div>
                                </div>
                                <div class="info-wrap">
                                    <a data-fancybox data-src="#modal-godine" href="javascript:;" class="btn btn-primary btn-info">
                                        <img src="images/info-icon.svg" alt="">
                                    </a>
                                    <div style="display: none;max-width:280px;" id="modal-godine" class="info-wrap-inner">
                                        <h2 data-selectable="true"><img src="images/info-icon.svg" alt="">INFO</h2>
                                        <p data-selectable="true">Možete da počnete da povlačite sredstva već sa navršenih 58
                                            godina</p>
                                    </div>
                                </div>
                                <div>
                                    <label for="inputIznosUplateJed">Iznos uplate člana (u rsd) </label>
                                </div>
                            </div>
                            <div class="form-inner-part left">
                                <div class="input-group plus-minus-input">
                                    <div class="input-group-button">
                                        <button type="button" class="button-minus" data-quantity="minus" data-field="rangeGodinaPocetkaUplateJed">
                                        </button>
                                    </div>
                                    <div class="range-wrap">
                                        <output class="bubble" name="rangeGodinaPocetkaUplateJed"></output>
                                        <input class="range input-group-field" type="range" id="rangeGodinaPocetkaUplateJed" name="rangeGodinaPocetkaUplateJed" min="0" max="100" value="40" step="1">
                                    </div>
                                    <div class="input-group-button">
                                        <button type="button" class="button-plus" data-quantity="plus" data-field="rangeGodinaPocetkaUplateJed">
                                        </button>
                                    </div>
                                    <div>
                                        <input class="input" type="number" name="rangeGodinaPocetkaUplateJed" id="inputGodinaPocetkaUplateJed" min="0" max="100" value="40" />
                                    </div>
                                </div>
                                <div>
                                    <label for="inputGodinaPocetkaUplateJed">godine na početku uplate doprinosa </label>
                                </div>
                            </div>
                            <div class="form-inner-part left">
                                <div class="input-group plus-minus-input">
                                    <div class="input-group-button">
                                        <button type="button" class="button-minus" data-quantity="minus" data-field="rangeGodinaPovlacenjeJed">
                                        </button>
                                    </div>
                                    <div class="range-wrap">
                                        <output class="bubble" name="rangeGodinaPovlacenjeJed"></output>
                                        <input class="range input-group-field" type="range" id="rangeGodinaPovlacenjeJed" name="rangeGodinaPovlacenjeJed" min="0" max="100" value="70" step="1">
                                    </div>
                                    <div class="input-group-button">
                                        <button type="button" class="button-plus" data-quantity="plus" data-field="rangeGodinaPovlacenjeJed">
                                        </button>
                                    </div>
                                    <div>
                                        <input class="input" name="rangeGodinaPovlacenjeJed" type="number" id="inputGodinaPovlacenjeJed" min="0" max="100" value="70" />
                                    </div>
                                </div>

                                <div>
                                    <label for="inputGodinaPovlacenjeJed">godine pri kojima počinje povlačenje
                                        sredstava </label>
                                </div>
                            </div>
                            <div class="form-inner-part left">
                                <div class="input-group plus-minus-input">
                                    <div class="input-group-button">
                                        <button type="button" class="button-minus" data-quantity="minus" data-field="rangeStopaPrinosaJed">
                                        </button>
                                    </div>
                                    <div class="range-wrap">
                                        <output class="bubble" name="rangeStopaPrinosaJed"></output>
                                        <input class="range input-group-field" type="range" id="rangeStopaPrinosaJed" name="rangeStopaPrinosaJed" min="0" max="20" value="4" step="1">
                                    </div>
                                    <div class="input-group-button">
                                        <button type="button" class="button-plus" data-quantity="plus" data-field="rangeStopaPrinosaJed">
                                        </button>
                                    </div>
                                    <div>
                                        <input class="input" type="number" name="rangeStopaPrinosaJed" id="inputStopaPrinosaJed" min="0" max="20" value="4" />
                                    </div>
                                </div>
                                <div>
                                    <label for="inputStopaPrinosaJed">stopa prinosa (na godišnjem nivou) </label>
                                </div>
                            </div>
                            <div class="form-inner-part left">
                                <div class="input-group plus-minus-input">
                                    <div class="input-group-button">
                                        <button type="button" class="button-minus" data-quantity="minus" data-field="rangePeriodAkumulacijeJed">
                                        </button>
                                    </div>
                                    <div class="range-wrap">
                                        <output class="bubble" name="rangePeriodAkumulacijeJed"></output>
                                        <input class="range input-group-field" type="range" id="rangePeriodAkumulacijeJed" name="rangePeriodAkumulacijeJed" min="0" max="100" value="40" step="1">
                                    </div>
                                    <div class="input-group-button">
                                        <button type="button" class="button-plus" data-quantity="plus" data-field="rangePeriodAkumulacijeJed">
                                        </button>
                                    </div>
                                    <div>
                                        <input class="input" type="number" name="rangePeriodAkumulacijeJed" id="inputPeriodAkumulacijeJed" min="0" max="100" value="40" />
                                    </div>
                                </div>
                                <div>
                                    <label for="inputPeriodAkumulacijeJed">Period akumulacije (u godinama) </label>
                                </div>
                            </div>
                            <div class="form-inner-part left">
                                <div class="input-group plus-minus-input">
                                    <div class="input-group-button">
                                        <button type="button" class="button-minus" data-quantity="minus" data-field="rangePeriodIsplateGodinamaJed">
                                        </button>
                                    </div>
                                    <div class="range-wrap">
                                        <output class="bubble" name="rangePeriodIsplateGodinamaJed"></output>
                                        <input class="range input-group-field" type="range" id="rangePeriodIsplateGodinamaJed" name="rangePeriodIsplateGodinamaJed" min="0" max="30" value="15" step="1">
                                    </div>
                                    <div class="input-group-button">
                                        <button type="button" class="button-plus" data-quantity="plus" data-field="rangePeriodIsplateGodinamaJed">
                                        </button>
                                    </div>
                                    <div>
                                        <input class="input" type="number" name="rangePeriodIsplateGodinamaJed" id="inputPeriodIsplateGodinamaJed" min="0" max="30" value="15" />
                                    </div>
                                </div>
                                <div>
                                    <label for="inputPeriodIsplateGodinamaJed">Period isplate (u godinama) </label>
                                </div>
                            </div>
                            <div class="btn-wrap">
                                <button type="button" id="btnJednokratno">IZRAČUNAJ</button>
                            </div>
                            <div class="calculator-description">
                                <h4>Vrednosti u kalkulatoru su prikazane sa
                                    već uračunatim svim naknadama!</h4>
                                <ul>
                                    <li>
                                        <p>Možete da uplaćujete za sebe ili za druge</p>
                                    </li>
                                    <li>
                                        <p>Možete da uplaćujete i za maloletna lica</p>
                                    </li>
                                    <li>
                                        <p>Prethodno ostvareni prinosi ne predstavljaju garanciju budućih
                                            rezultata. Budući prinosi mogu biti viši ili niži od prethodno
                                            ostaverenih.</p>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <div class="form-right">
                        <div class="form-inner">
                            <div class="akumulacija-top">
                                <div class="form-inner-part right">
                                    <label for="inputAkumuliranaSumaJed">Akumulirana suma </label>
                                    <input readonly type="number" id="inputAkumuliranaSumaJed" />
                                </div>
                                <div class="form-inner-part right">
                                    <label for="inputUplacenoJed">Ukupno uplaćeno od strane člana </label>
                                    <input readonly type="number" id="inputUplacenoJed" />
                                </div>
                            </div>
                            <div class="akumulacija-bottom">
                                <h2>AKUMULIRANE SUME</h2>
                                <div class="form-inner-part right">
                                    <label for="inputUlaznaNaknadaJad">Ulazna naknada za uplatu člana </label>
                                    <input readonly type="number" id="inputUlaznaNaknadaJad" />
                                </div>
                                <div class="form-inner-part right">
                                    <label for="inputIznosIsplateMesecnoJed">Iznos isplate (mesečno) </label>
                                    <input readonly type="number" id="inputIznosIsplateMesecnoJed" />
                                </div>
                                <div class="form-inner-part right">
                                    <label for="inputUkupanIznosIsplacenihSredstavaJed">Ukupan iznos isplaćenih sredstava </label>
                                    <input readonly type="number" id="inputUkupanIznosIsplacenihSredstavaJed" />
                                </div>
                                <div class="form-inner-part right">
                                    <label for="inputZaradjenoJed">Zarađeno </label>
                                    <input readonly type="number" id="inputZaradjenoJed" />
                                </div>
                            </div>
                        </div>
                        <div class="calculator-description">
                            <p><span>*</span>Kalkulacija je informativnog karaktera, prethodno ostvareni prinosi ne
                                predstavljaju garanciju budućih rezultata. Budući prinosi mogu biti viši ili niži od
                                ranijih.
                            </p>
                            <p><span>*</span>Povlačenje sredstava može početi najranije sa navršenih 58 godina starosti a
                                najkasnije sa navršenih 70 godina</p>
                        </div>
                    </div>
                </div>
                <div class="pie-wrap">
                    <div class="pie-inner" id="chartContainerJednokratna" style="height: auto; width: 100%;"></div>
                </div>
            </div>
        </div>

        <!--<label for="inputIznosUplateJed">Iznos uplate člana (u rsd) </label><br/>-->
        <!--<input type="range" id="rangeIznosUplateJed" name="rangeIznosUplateJed" min="0" max="1500000" value=5000-->
        <!--step="5000"><br/>-->

        <!--<input type="number" id="inputIznosUplateJed" value=250000/><br/><br/>-->
        <!--<label for="inputUlaznaNaknadaJad">Ulazna naknada za uplatu člana </label>-->
        <!--<input type="number" id="inputUlaznaNaknadaJad"/><br/><br/>-->
        <!--<label for="inputGodinaPocetkaUplateJed">godine na početku uplate doprinosa </label><br/>-->
        <!--<input type="range" id="rangeGodinaPocetkaUplateJed" name="rangeGodinaPocetkaUplateJed" min="0"-->
        <!--max="100" value=40 step="1"><br/>-->

        <!--<input type="number" id="inputGodinaPocetkaUplateJed" value=40/><br/><br/>-->
        <!--<label for="inputGodinaPovlacenjeJed">godine pri kojima počinje povlačenje sredstava </label><br/>-->
        <!--<input type="range" id="rangeGodinaPovlacenjeJed" name="rangeGodinaPovlacenjeJed" min="0" max="100"-->
        <!--value=70 step="1"><br/>-->
        <!--<input type="number" id="inputGodinaPovlacenjeJed" value=70/><br/><br/>-->


        <!--<label for="inputPeriodAkumulacijeJed">Period akumulacije (u godinama) </label><br/>-->
        <!--<input type="number" id="inputPeriodAkumulacijeJed"/><br/><br/>-->


        <!--<label for="inputStopaPrinosaJed">stopa prinosa (na godišnjem nivou) </label><br/>-->
        <!--<input type="range" id="rangeStopaPrinosaJed" name="rangeStopaPrinosaJed" min="0" max="20" value=4-->
        <!--step="1"><br/>-->
        <!--<input type="number" id="inputStopaPrinosaJed" value=4/><br/><br/>-->


        <!--<label for="inputUplacenoJed">Ukupno uplaćeno od strane člana </label><br/>-->
        <!--<input type="number" id="inputUplacenoJed"/><br/><br/>-->
        <!--<label for="inputZaradjenoJed">Zarađeno </label><br/>-->
        <!--<input type="number" id="inputZaradjenoJed"/><br/><br/>-->
        <!--<label for="inputAkumuliranaSumaJed">Akumulirana suma </label><br/>-->
        <!--<input type="number" id="inputAkumuliranaSumaJed"/><br/><br/>-->

        <!--<label for="inputPeriodIsplateGodinamaJed">Period isplate (u godinama) </label><br/>-->
        <!--<input type="range" id="rangePeriodIsplateGodinamaJed" name="rangePeriodIsplateGodinamaJed" min="0"-->
        <!--max="30" value=15 step="1"><br/>-->
        <!--<input type="number" id="inputPeriodIsplateGodinamaJed" value=15/><br/><br/>-->


        <!--<label for="inputIznosIsplateMesecnoJed">Iznos isplate (mesečno) </label><br/>-->
        <!--<input type="number" id="inputIznosIsplateMesecnoJed"/><br/><br/>-->
        <!--<label for="inputUkupanIznosIsplacenihSredstavaJed">Ukupan iznos isplaćenih sredstava </label><br/>-->
        <!--<input type="number" id="inputUkupanIznosIsplacenihSredstavaJed"/><br/><br/>-->
        <!--<button type="button" id="btnJednokratno">Click Me!</button>-->
    </body>

</html>