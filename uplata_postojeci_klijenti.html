<!DOCTYPE html>
<html>

    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <!-- <script src="jquery-3.5.1.min.js"></script>
    <script src="fancybox/jquery.fancybox.min.js"></script>
    <script src="js/canvasjs.min.js"></script>
    <script src="uplata_postojeci_klijenti.js" type="module"></script>
    <link rel="stylesheet" href="fancybox/jquery.fancybox.css">
    <link rel="stylesheet" href="style.css"> -->
        <script>
            jQuery(document).ready(function () {

                // $('#btnMesecno').click(function () {
                //
                //         // alert(inputUkupnoUplacenoClanaMes.value);
                //
                //     renderanjePie();
                // });
                const ranges = document.querySelectorAll(".form-inner-part .range");
                const inputs = document.querySelectorAll(".form-inner-part .input");
                const outputs = document.querySelectorAll(".form-inner-part .bubble");
                ranges.forEach(function (range, index) {
                    range.addEventListener("input", function (event) {
                        inputs[index].value = event.target.value ? event.target.value : "0";
                    });
                    inputs[index].addEventListener("input", function (event) {
                        ranges[index].value = event.target.value ? event.target.value : "0";
                        outputs[index].value = event.target.value ? event.target.value : "0";
                    });
                });

                $('[data-quantity="plus"]').click(function (e) {
                    e.preventDefault();
                    var fieldName = $(this).attr('data-field');
                    var fieldRange = parseInt($('input[name=' + fieldName + ']').attr('step'));
                    var fieldMax = parseInt($('input[name=' + fieldName + ']').attr('max'));
                    var currentVal = parseInt($('input[name=' + fieldName + ']').val());
                    var currentValOutput = parseInt($('output[name=' + fieldName + ']').val());

                    if (currentVal < fieldMax) {
                        $('input[name=' + fieldName + ']').val(currentVal + fieldRange);
                        $('output[name=' + fieldName + ']').val(currentValOutput + fieldRange);
                    }
                });
                $('[data-quantity="minus"]').click(function (e) {
                    e.preventDefault();
                    var fieldName = $(this).attr('data-field');
                    var fieldRange = parseInt($('input[name=' + fieldName + ']').attr('step'));
                    var currentVal = parseInt($('input[name=' + fieldName + ']').val());
                    var currentValOutput = parseInt($('output[name=' + fieldName + ']').val());

                    if (!isNaN(currentVal) && currentVal > 0) {
                        $('input[name=' + fieldName + ']').val(currentVal - fieldRange);
                        $('output[name=' + fieldName + ']').val(currentValOutput - fieldRange);
                    } else {
                        $('input[name=' + fieldName + ']').val(0);
                        $('output[name=' + fieldName + ']').val(0);
                    }
                });


                var allRanges = document.querySelectorAll(".form-inner-part");
                allRanges.forEach(function (wrap) {
                    var range = wrap.querySelector(".form-inner-part .range");
                    var bubble = wrap.querySelector(".form-inner-part .bubble");
                    var input = wrap.querySelector(".form-inner-part .input");
                    // var fieldMax = wrap.querySelector(".form-inner-part .input").attr('data-field');
                    // var fieldMin = wrap.querySelector(".form-inner-part .input").attr('data-field');

                    input.addEventListener("input", function () {
                        setBubbleInput(input, bubble);
                    });
                    setBubbleInput(input, bubble);

                    range.addEventListener("input", function () {
                        setBubbleRange(range, bubble);
                    });
                    setBubbleRange(range, bubble);
                });

                function setBubbleRange(range, bubble) {
                    var val = range.value;
                    var min = range.min ? range.min : 0;
                    var max = range.max ? range.max : 100;
                    var newVal = Number((val - min) * 100 / (max - min));
                    bubble.innerHTML = val;

                    // Sorta magic numbers based on size of the native UI thumb
                    bubble.style.left = "calc(" + newVal + "% + (" + (20 - newVal * 0.4) + "px))";
                }

                function setBubbleInput(input, bubble) {
                    var val = input.value;
                    var min = input.min ? input.min : 0;
                    var max = input.max ? input.max : 100;
                    var newVal = Number((val - min) * 100 / (max - min));
                    bubble.innerHTML = val;

                    // Sorta magic numbers based on size of the native UI thumb
                    bubble.style.left = "calc(" + newVal + "% + (" + (20 - newVal * 0.4) + "px))";
                }


            });
        </script>
    </head>

    <body>
        <div class="calculator-container">
            <div class="title">
                <h2>uplata postojeći klijent</h2>
                <p> Poštovani, da biste izračunali iznos akumuliranih sredstava, potrebno je uneti iznos jednokratne uplate,
                    broj godina uplate i stopu očekivanog prinosa.
                </p>
            </div>
            <div class="calculator-page-wrap">
                <div class="calculator-form-wrap">
                    <div class="form-left">
                        <div class="form-inner">
                            <div class="form-inner-part left">
                                <div class="input-group plus-minus-input">
                                    <div class="input-group-button">
                                        <button type="button" class="button-minus" data-quantity="minus" data-field="rangeTrenutnoStanjeKli">
                                        </button>
                                    </div>
                                    <div class="range-wrap">
                                        <output class="bubble" name="rangeTrenutnoStanjeKli"></output>
                                        <input class="range input-group-field" type="range" id="rangeTrenutnoStanjeKli" name="rangeTrenutnoStanjeKli" min="0" max="1500000" value="246250" step="5000">
                                    </div>
                                    <div class="input-group-button">
                                        <button type="button" class="button-plus" data-quantity="plus" data-field="rangeTrenutnoStanjeKli">
                                        </button>
                                    </div>
                                    <div>
                                        <input class="input" name="rangeTrenutnoStanjeKli" type="number" id="inputTrenutnoStanjeKli" min="0" max="1500000" value="246250" />
                                    </div>
                                </div>
                                <div>
                                    <label for="inputTrenutnoStanjeKli">Trenutno stanje</label>
                                </div>
                            </div>
                            <div class="form-inner-part left">
                                <div class="input-group plus-minus-input">
                                    <div class="input-group-button">
                                        <button type="button" class="button-minus" data-quantity="minus" data-field="rangeIznosUplateMesKli">
                                        </button>
                                    </div>
                                    <div class="range-wrap">
                                        <output class="bubble" name="rangeIznosUplateMesKli"></output>
                                        <input class="range input-group-field" type="range" id="rangeIznosUplateMesKli" name="rangeIznosUplateMesKli" min="0" max="1500000" value="5000" step="5000">
                                    </div>
                                    <div class="input-group-button">
                                        <button type="button" class="button-plus" data-quantity="plus" data-field="rangeIznosUplateMesKli">
                                        </button>
                                    </div>
                                    <div>
                                        <input class="input" name="rangeIznosUplateMesKli" type="number" id="inputIznosUplateMesKli" min="0" max="1500000" value="5000" />
                                    </div>
                                </div>
                                <div>
                                    <label for="inputIznosUplateMesKli">Iznos mesečne uplate (rsd)</label>
                                </div>
                            </div>
                            <div class="form-inner-part left">
                                <div class="input-group plus-minus-input">
                                    <div class="input-group-button">
                                        <button type="button" class="button-minus" data-quantity="minus" data-field="rangeGodinaPocetkaUplateKli">
                                        </button>
                                    </div>
                                    <div class="range-wrap">
                                        <output class="bubble" name="rangeGodinaPocetkaUplateKli"></output>
                                        <input class="range input-group-field" type="range" id="rangeGodinaPocetkaUplateKli" name="rangeGodinaPocetkaUplateKli" min="0" max="100" value="35" step="1">
                                    </div>
                                    <div class="input-group-button">
                                        <button type="button" class="button-plus" data-quantity="plus" data-field="rangeGodinaPocetkaUplateKli">
                                        </button>
                                    </div>
                                    <div>
                                        <input class="input" name="rangeGodinaPocetkaUplateKli" type="number" id="inputGodinaPocetkaUplateKli" min="0" max="100" value="35" />
                                    </div>
                                </div>
                                <div>
                                    <label for="inputGodinaPocetkaUplateKli">godine na početku uplate doprinosa</label>
                                </div>
                            </div>
                            <div class="form-inner-part left">
                                <div class="input-group plus-minus-input">
                                    <div class="input-group-button">
                                        <button type="button" class="button-minus" data-quantity="minus" data-field="rangeGodinaPovlacenjeKli">
                                        </button>
                                    </div>
                                    <div class="range-wrap">
                                        <output class="bubble" name="rangeGodinaPovlacenjeKli"></output>
                                        <input class="range input-group-field" type="range" id="rangeGodinaPovlacenjeKli" name="rangeGodinaPovlacenjeKli" min="0" max="100" value="65" step="1">
                                    </div>
                                    <div class="input-group-button">
                                        <button type="button" class="button-plus" data-quantity="plus" data-field="rangeGodinaPovlacenjeKli">
                                        </button>
                                    </div>
                                    <div>
                                        <input class="input" name="rangeGodinaPovlacenjeKli" type="number" id="inputGodinaPovlacenjeKli" min="0" max="100" value="65" />
                                    </div>
                                </div>
                                <div class="info-wrap">
                                    <a data-fancybox data-src="#selectableModal" href="javascript:;" class="btn btn-primary btn-info">
                                        <img src="images/info-icon.svg" alt="">
                                    </a>
                                    <div style="display: none;max-width:280px;" id="selectableModal" class="info-wrap-inner">
                                        <h2 data-selectable="true"><img src="images/info-icon.svg" alt="">INFO</h2>
                                        <p data-selectable="true">Opciono, ako Vam i poslodavac uplaćuje</p>
                                    </div>
                                </div>
                                <div>
                                    <label for="inputGodinaPovlacenjeKli">godine pri kojima počinje povlačenje sredstava</label>
                                </div>
                            </div>
                            <div class="form-inner-part left">
                                <div class="input-group plus-minus-input">
                                    <div class="input-group-button">
                                        <button type="button" class="button-minus" data-quantity="minus" data-field="rangeStopaPrinosaKli">
                                        </button>
                                    </div>
                                    <div class="range-wrap">
                                        <output class="bubble" name="rangeStopaPrinosaKli"></output>
                                        <input class="range input-group-field" type="range" id="rangeStopaPrinosaKli" name="rangeStopaPrinosaKli" min="0" max="20" value="4" step="1">
                                    </div>
                                    <div class="input-group-button">
                                        <button type="button" class="button-plus" data-quantity="plus" data-field="rangeStopaPrinosaKli">
                                        </button>
                                    </div>
                                    <div>
                                        <input class="input" type="number" name="rangeStopaPrinosaKli" id="inputStopaPrinosaKli" min="0" max="20" value="4" />
                                    </div>
                                </div>
                                <div>
                                    <label for="inputStopaPrinosaKli">stopa prinosa (na godišnjem nivou)</label>
                                </div>
                            </div>
                            <div class="form-inner-part left">
                                <div class="input-group plus-minus-input">
                                    <div class="input-group-button">
                                        <button type="button" class="button-minus" data-quantity="minus" data-field="rangePeriodIsplateGodinamaKli">
                                        </button>
                                    </div>
                                    <div class="range-wrap">
                                        <output class="bubble" name="rangePeriodIsplateGodinamaKli"></output>
                                        <input class="range input-group-field" type="range" id="rangePeriodIsplateGodinamaKli" name="rangePeriodIsplateGodinamaKli" min="0" max="30" value="15" step="1">
                                    </div>
                                    <div class="input-group-button">
                                        <button type="button" class="button-plus" data-quantity="plus" data-field="rangePeriodIsplateGodinamaKli">
                                        </button>
                                    </div>
                                    <div>
                                        <input class="input" name="rangePeriodIsplateGodinamaKli" type="number" id="inputPeriodIsplateGodinamaKli" min="0" max="30" value="15" />
                                    </div>
                                </div>
                                <div>
                                    <label for="inputPeriodIsplateGodinamaKli">Period isplate (u godinama)</label>
                                </div>
                            </div>
                            <div class="btn-wrap">
                                <button type="button" id="btnKli">IZRAČUNAJ</button>
                            </div>
                            <div class="calculator-description">
                                <h4>Vrednosti u kalkulatoru su prikazane sa
                                    već uračunatim svim naknadama!</h4>
                                <ul>
                                    <li>
                                        <p>Možete da uplaćujete za sebe ili za druge</p>
                                    </li>
                                    <li>
                                        <p>Možete da uplaćujete i za maloletna lica</p>
                                    </li>
                                    <li>
                                        <p>Prethodno ostvareni prinosi ne predstavljaju garanciju budućih
                                            rezultata. Budući prinosi mogu biti viši ili niži od prethodno
                                            ostaverenih.</p>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <div class="form-right">
                        <div class="form-inner">
                            <div class="akumulacija-top">
                                <div class="form-inner-part right">
                                    <label for="inputAkumuliranaSumaKli">Akumulirana suma </label>
                                    <input type="number" id="inputAkumuliranaSumaKli" />
                                </div>
                                <div class="form-inner-part right">
                                    <label for="inputIznosIsplateMesecnoKli">Iznos isplate (mesečno)</label>
                                    <input type="number" id="inputIznosIsplateMesecnoKli" />
                                </div>
                                <div class="form-inner-part right">
                                    <label for="inputUkupanIznosIsplacenihSredstavaKli">Ukupan iznos isplaćenih sredstava</label>
                                    <input type="number" id="inputUkupanIznosIsplacenihSredstavaKli" />
                                </div>
                            </div>
                            <div class="akumulacija-bottom">
                                <div class="form-inner-part right">
                                    <label for="inputUlaznaNaknadaKli">Ulazna naknada </label>
                                    <input type="number" id="inputUlaznaNaknadaKli" />
                                    <div class="info-wrap">
                                        <a data-fancybox data-src="#modalAkumuliraneSume" href="javascript:;" class="btn btn-primary btn-info">
                                            <img src="images/info-icon.svg" alt="">
                                        </a>
                                        <div style="display: none;max-width:280px;" id="modalAkumuliraneSume" class="info-wrap-inner">
                                            <h2 data-selectable="true"><img src="images/info-icon.svg" alt="">INFO</h2>
                                            <p data-selectable="true">Zbir vaših uplata umanjen za naknade</p>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-inner-part right">
                                    <label for="inputPeriodAkumulacijeKli">Period akumulacije (u godinama)</label>
                                    <input type="number" id="inputPeriodAkumulacijeKli" />
                                </div>
                                <div class="form-inner-part right">
                                    <label for="inputUkupnoUplacenoKli">uplaćena suma</label>
                                    <input type="number" id="inputUkupnoUplacenoKli" />
                                </div>
                                <div class="form-inner-part right">
                                    <label for="inputAkumuliranaTrenutnoKli">Akumulirana suma za trenutno stanje</label>
                                    <input type="number" id="inputAkumuliranaTrenutnoKli" />
                                </div>
                                <div class="form-inner-part right">
                                    <label for="inputAkumuliranaMesKli">Akumulirana suma za mesečne uplate</label>
                                    <input type="number" id="inputAkumuliranaMesKli" />
                                </div>
                                <div class="form-inner-part right">
                                    <label for="inputZaradjenoKli">Zarađeno</label>
                                    <input type="number" id="inputZaradjenoKli" />
                                </div>
                            </div>
                        </div>
                        <div class="calculator-description">
                            <h4>Ukupan iznos isplaćenih sredstava</h4>
                            <p><span>*</span>Kalkulacija je informativnog karaktera, prethodno ostvareni prinosi ne
                                predstavljaju garanciju budućih rezultata. Budući prinosi mogu biti viši ili niži od
                                ranijih.
                            </p>
                            <p><span>*</span>Povlačenje sredstava može početi najranije sa navršenih 58 godina starosti a
                                najkasnije sa navršenih 70 godina</p>
                        </div>
                    </div>
                </div>
                <div class="pie-wrap">
                    <div class="pie-inner" id="chartContainerUplataPostojeci" style="height: auto; width: 100%;"></div>
                </div>
            </div>
        </div>


        <!--<label for="inputTrenutnoStanjeKli">Trenutno stanje</label>-->
        <!--<input type="range" id="rangeTrenutnoStanjeKli" name="rangeTrenutnoStanjeKli" min="0" max="1500000" value=246250-->
        <!--step="5000"><br/>-->
        <!--<input type="number" id="inputTrenutnoStanjeKli" value=246250/><br/><br/>-->


        <!--<label for="inputIznosUplateMesKli">Iznos mesečne uplate (rsd)</label>-->
        <!--<input type="range" id="rangeIznosUplateMesKli" name="rangeIznosUplateMesKli" min="0" max="1500000" value=5000-->
        <!--step="5000"><br/>-->
        <!--<input type="number" id="inputIznosUplateMesKli" value=5000/><br/><br/>-->


        <!--<label for="inputUlaznaNaknadaKli">Ulazna naknada </label>-->
        <!--<input type="number" id="inputUlaznaNaknadaKli"/><br/><br/>-->


        <!--<label for="inputGodinaPocetkaUplateKli">godine na početku uplate doprinosa</label>-->
        <!--<input type="range" id="rangeGodinaPocetkaUplateKli" name="rangeGodinaPocetkaUplateKli" min="0" max="100" value=35-->
        <!--step="1"><br/>-->
        <!--<input type="number" id="inputGodinaPocetkaUplateKli" value=35/><br/><br/>-->


        <!--<label for="inputGodinaPovlacenjeKli">godine pri kojima počinje povlačenje sredstava</label>-->
        <!--<input type="range" id="rangeGodinaPovlacenjeKli" name="rangeGodinaPovlacenjeKli" min="0" max="100" value=65-->
        <!--step="1"><br/>-->
        <!--<input type="number" id="inputGodinaPovlacenjeKli" value=65/><br/><br/>-->


        <!--<label for="inputPeriodAkumulacijeKli">Period akumulacije (u godinama)</label>-->
        <!--<input type="number" id="inputPeriodAkumulacijeKli"/><br/><br/>-->


        <!--<label for="inputStopaPrinosaKli">stopa prinosa (na godišnjem nivou)</label>-->
        <!--<input type="range" id="rangeStopaPrinosaKli" name="rangeStopaPrinosaKli" min="0" max="20" value=4 step="1"><br/>-->
        <!--<input type="number" id="inputStopaPrinosaKli" value=4/><br/><br/>-->


        <!--<label for="inputUkupnoUplacenoKli">uplaćena suma</label>-->
        <!--<input type="number" id="inputUkupnoUplacenoKli"/><br/><br/>-->


        <!--<label for="inputZaradjenoKli">Zarađena sredstva</label>-->
        <!--<input type="number" id="inputZaradjenoKli"/><br/><br/>-->


        <!--<label for="inputAkumuliranaTrenutnoKli">Akumulirana suma za trenutno stanje</label>-->
        <!--<input type="number" id="inputAkumuliranaTrenutnoKli"/><br/><br/>-->


        <!--<label for="inputAkumuliranaMesKli">Akumulirana suma za mesečne uplate</label>-->
        <!--<input type="number" id="inputAkumuliranaMesKli"/><br/><br/>-->


        <!--<label for="inputAkumuliranaSumaKli">Akumulirana suma </label>-->
        <!--<input type="number" id="inputAkumuliranaSumaKli"/><br/><br/>-->


        <!--<label for="inputPeriodIsplateGodinamaKli">Period isplate (u godinama)</label>-->
        <!--<input type="range" id="rangePeriodIsplateGodinamaKli" name="rangePeriodIsplateGodinamaKli" min="0" max="30" value=15-->
        <!--step="1"><br/>-->
        <!--<input type="number" id="inputPeriodIsplateGodinamaKli" value=15/><br/><br/>-->


        <!--<label for="inputIznosIsplateMesecnoKli">Iznos isplate (mesečno)</label>-->
        <!--<input type="number" id="inputIznosIsplateMesecnoKli"/><br/><br/>-->


        <!--<label for="inputUkupanIznosIsplacenihSredstavaKli">Ukupan iznos isplaćenih sredstava</label>-->
        <!--<input type="number" id="inputUkupanIznosIsplacenihSredstavaKli"/><br/><br/>-->


        <!--<button type="button" id="btnKli">IZRAČUNAJ</button>-->

    </body>

</html>