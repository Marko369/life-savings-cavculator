<!DOCTYPE html>
<html>

    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <!-- <script src="jquery-3.5.1.min.js"></script>
    <script src="fancybox/jquery.fancybox.min.js"></script>
    <script src="js/canvasjs.min.js"></script>
    <script src="mesecne_uplate.js" type="module"></script>
    <link rel="stylesheet" href="fancybox/jquery.fancybox.css">
    <link rel="stylesheet" href="style.css"> -->
        <script>
            jQuery(document).ready(function () {

                // $('#btnMesecno').click(function () {
                //
                //         // alert(inputUkupnoUplacenoClanaMes.value);
                //
                //     renderanjePie();
                // });
                const ranges = document.querySelectorAll(".form-inner-part .range");
                const inputs = document.querySelectorAll(".form-inner-part .input");
                const outputs = document.querySelectorAll(".form-inner-part .bubble");
                ranges.forEach(function (range, index) {
                    range.addEventListener("input", function (event) {
                        inputs[index].value = event.target.value ? event.target.value : "0";
                    });
                    inputs[index].addEventListener("input", function (event) {
                        ranges[index].value = event.target.value ? event.target.value : "0";
                        outputs[index].value = event.target.value ? event.target.value : "0";
                    });
                });

                $('[data-quantity="plus"]').click(function (e) {
                    e.preventDefault();
                    var fieldName = $(this).attr('data-field');
                    var fieldRange = parseInt($('input[name=' + fieldName + ']').attr('step'));
                    var fieldMax = parseInt($('input[name=' + fieldName + ']').attr('max'));
                    var currentVal = parseInt($('input[name=' + fieldName + ']').val());
                    var currentValOutput = parseInt($('output[name=' + fieldName + ']').val());

                    if (currentVal < fieldMax) {
                        $('input[name=' + fieldName + ']').val(currentVal + fieldRange);
                        $('output[name=' + fieldName + ']').val(currentValOutput + fieldRange);
                    }
                });
                $('[data-quantity="minus"]').click(function (e) {
                    e.preventDefault();
                    var fieldName = $(this).attr('data-field');
                    var fieldRange = parseInt($('input[name=' + fieldName + ']').attr('step'));
                    var currentVal = parseInt($('input[name=' + fieldName + ']').val());
                    var currentValOutput = parseInt($('output[name=' + fieldName + ']').val());

                    if (!isNaN(currentVal) && currentVal > 0) {
                        $('input[name=' + fieldName + ']').val(currentVal - fieldRange);
                        $('output[name=' + fieldName + ']').val(currentValOutput - fieldRange);
                    } else {
                        $('input[name=' + fieldName + ']').val(0);
                        $('output[name=' + fieldName + ']').val(0);
                    }
                });


                var allRanges = document.querySelectorAll(".form-inner-part");
                allRanges.forEach(function (wrap) {
                    var range = wrap.querySelector(".form-inner-part .range");
                    var bubble = wrap.querySelector(".form-inner-part .bubble");
                    var input = wrap.querySelector(".form-inner-part .input");
                    // var fieldMax = wrap.querySelector(".form-inner-part .input").attr('data-field');
                    // var fieldMin = wrap.querySelector(".form-inner-part .input").attr('data-field');

                    input.addEventListener("input", function () {
                        setBubbleInput(input, bubble);
                    });
                    setBubbleInput(input, bubble);

                    range.addEventListener("input", function () {
                        setBubbleRange(range, bubble);
                    });
                    setBubbleRange(range, bubble);
                });

                function setBubbleRange(range, bubble) {
                    var val = range.value;
                    var min = range.min ? range.min : 0;
                    var max = range.max ? range.max : 100;
                    var newVal = Number((val - min) * 100 / (max - min));
                    bubble.innerHTML = val;

                    // Sorta magic numbers based on size of the native UI thumb
                    bubble.style.left = "calc(" + newVal + "% + (" + (20 - newVal * 0.4) + "px))";
                }

                function setBubbleInput(input, bubble) {
                    var val = input.value;
                    var min = input.min ? input.min : 0;
                    var max = input.max ? input.max : 100;
                    var newVal = Number((val - min) * 100 / (max - min));
                    bubble.innerHTML = val;

                    // Sorta magic numbers based on size of the native UI thumb
                    bubble.style.left = "calc(" + newVal + "% + (" + (20 - newVal * 0.4) + "px))";
                }


            });
        </script>
    </head>

    <body>
        <div class="calculator-container">
            <div class="title">
                <h1>MESEČNE REDOVNE UPLATE</h1>
                <p><b>ŠTA tačno OVDE TREBA DA PIŠE?</b> Poštovani, da biste izračunali iznos akumuliranih sredstava, potrebno je
                    popuniti sledeća polja : godine na početku uplate doprinosa, godine pri kojima počinje povlačenje sredstava,
                    stopa prinosa (na godišnjem nivou), i iznos uplate člana / poslodavca
                </p>
            </div>
            <div class="calculator-page-wrap">
                <div class="calculator-form-wrap">
                    <div class="form-left">
                        <div class="form-inner">
                            <div class="form-inner-part left">
                                <div class="input-group plus-minus-input">
                                    <div class="input-group-button">
                                        <button type="button" class="button-minus" data-quantity="minus" data-field="rangeIznosUplateClanaMes">
                                        </button>
                                    </div>
                                    <div class="range-wrap">
                                        <output class="bubble" name="rangeIznosUplateClanaMes"></output>
                                        <input class="range input-group-field" type="range" id="rangeIznosUplateClanaMes" name="rangeIznosUplateClanaMes" min="0" max="1500000" value="75000" step="5000">
                                    </div>
                                    <div class="input-group-button">
                                        <button type="button" class="button-plus" data-quantity="plus" data-field="rangeIznosUplateClanaMes">
                                        </button>
                                    </div>
                                    <div>
                                        <input class="input" type="number" id="inputIznosUplateClanaMes" min="0" name="rangeIznosUplateClanaMes" max="1500000" value="75000" />
                                    </div>
                                </div>
                                <div>
                                    <label for="inputIznosUplateClanaMes">Iznos uplate člana (u rsd) </label>
                                </div>
                            </div>
                            <div class="form-inner-part left">
                                <div class="input-group plus-minus-input">
                                    <div class="input-group-button">
                                        <button type="button" class="button-minus" data-quantity="minus" data-field="rangeIznosUplatePoslodavcaMes">
                                        </button>
                                    </div>
                                    <div class="range-wrap">
                                        <output class="bubble" name="rangeIznosUplatePoslodavcaMes"></output>
                                        <input class="range input-group-field" type="range" id="rangeIznosUplatePoslodavcaMes" name="rangeIznosUplatePoslodavcaMes" min="0" max="1500000" value="0" step="5000">
                                    </div>
                                    <div class="input-group-button">
                                        <button type="button" class="button-plus" data-quantity="plus" data-field="rangeIznosUplatePoslodavcaMes">
                                        </button>
                                    </div>
                                    <div>
                                        <input class="input" type="number" id="inputIznosUplatePoslodavcaMes" min="0" max="1500000" name="rangeIznosUplatePoslodavcaMes" value="0" />
                                    </div>
                                </div>
                                <div class="info-wrap">
                                    <a data-fancybox data-src="#selectableModal" href="javascript:;" class="btn btn-primary btn-info">
                                        <img src="images/info-icon.svg" alt="">
                                    </a>
                                    <div style="display: none;max-width:280px;" id="selectableModal" class="info-wrap-inner">
                                        <h2 data-selectable="true"><img src="images/info-icon.svg" alt="">INFO</h2>
                                        <p data-selectable="true">Opciono, ako Vam i poslodavac uplaćuje</p>
                                    </div>
                                </div>
                                <div>
                                    <label for="inputIznosUplatePoslodavcaMes">Iznos uplate poslodavca (u rsd) </label>
                                </div>
                            </div>
                            <div class="form-inner-part left">
                                <div class="input-group plus-minus-input">
                                    <div class="input-group-button">
                                        <button type="button" class="button-minus" data-quantity="minus" data-field="rangeGodinaPocetkaUplateMes">
                                        </button>
                                    </div>
                                    <div class="range-wrap">
                                        <output class="bubble" name="rangeGodinaPocetkaUplateMes"></output>
                                        <input class="range" type="range" id="rangeGodinaPocetkaUplateMes" name="rangeGodinaPocetkaUplateMes" min="0" max="100" value="35" step="1">
                                    </div>
                                    <div class="input-group-button">
                                        <button type="button" class="button-plus" data-quantity="plus" data-field="rangeGodinaPocetkaUplateMes">
                                        </button>
                                    </div>
                                    <div>
                                        <input class="input" type="number" name="rangeGodinaPocetkaUplateMes" id="inputGodinaPocetkaUplateMes" min="0" max="100" value="35" />
                                    </div>
                                </div>
                                <div>
                                    <label for="inputGodinaPocetkaUplateMes">godine na početku uplate doprinosa </label>
                                </div>
                            </div>
                            <div class="form-inner-part left">
                                <div class="input-group plus-minus-input">
                                    <div class="input-group-button">
                                        <button type="button" class="button-minus" data-quantity="minus" data-field="rangeGodinaPovlacenjeMes">
                                        </button>
                                    </div>
                                    <div class="range-wrap">
                                        <output class="bubble" name="rangeGodinaPovlacenjeMes"></output>
                                        <input class="range input-group-field" type="range" id="rangeGodinaPovlacenjeMes" name="rangeGodinaPovlacenjeMes" min="0" max="100" value="65" step="1">
                                    </div>
                                    <div class="input-group-button">
                                        <button type="button" class="button-plus" data-quantity="plus" data-field="rangeGodinaPovlacenjeMes">
                                        </button>
                                    </div>
                                    <div>
                                        <input class="input" name="rangeGodinaPovlacenjeMes" type="number" id="inputGodinaPovlacenjeMes" min="0" max="100" value="65" />
                                    </div>
                                </div>
                                <div class="info-wrap">
                                    <a data-fancybox data-src="#modal-godine" href="javascript:;" class="btn btn-primary btn-info">
                                        <img src="images/info-icon.svg" alt="">
                                    </a>
                                    <div style="display: none;max-width:280px;" id="modal-godine" class="info-wrap-inner">
                                        <h2 data-selectable="true"><img src="images/info-icon.svg" alt="">INFO</h2>
                                        <p data-selectable="true">Možete da počnete da povlačite sredstva već sa navršenih 58
                                            godina</p>
                                    </div>
                                </div>
                                <div>
                                    <label for="inputGodinaPovlacenjeMes">godine pri kojima počinje povlačenje
                                        sredstava </label>
                                </div>
                            </div>
                            <div class="form-inner-part left">
                                <div class="input-group plus-minus-input">
                                    <div class="input-group-button">
                                        <button type="button" class="button-minus" data-quantity="minus" data-field="rangePeriodIsplateGodinamaMes">
                                        </button>
                                    </div>
                                    <div class="range-wrap">
                                        <output class="bubble" name="rangePeriodIsplateGodinamaMes"></output>
                                        <input class="range input-group-field" type="range" id="rangePeriodIsplateGodinamaMes" name="rangePeriodIsplateGodinamaMes" min="0" max="100" value="30" step="1">
                                    </div>
                                    <div class="input-group-button">
                                        <button type="button" class="button-plus" data-quantity="plus" data-field="rangePeriodIsplateGodinamaMes">
                                        </button>
                                    </div>
                                    <div>
                                        <input class="input" name="rangePeriodIsplateGodinamaMes" type="number" id="inputPeriodIsplateGodinamaMes" min="0" max="100" value="30" />
                                    </div>
                                </div>
                                <div class="info-wrap">
                                    <a data-fancybox data-src="#modalPeriodIsplate" href="javascript:;" class="btn btn-primary btn-info">
                                        <img src="images/info-icon.svg" alt="">
                                    </a>
                                    <div style="display: none;max-width:280px;" id="modalPeriodIsplate" class="info-wrap-inner">
                                        <h2 data-selectable="true"><img src="images/info-icon.svg" alt="">INFO</h2>
                                        <p data-selectable="true">Stope prinosa naših fondova na dan 30.6.2020. <b>treba da
                                                stane
                                                tabela sa prikazom?</b> Prethodno ostvareni prinosi ne predstavljaju garanciju
                                            budućih
                                            rezultata. Budući prinosi mogu biti viši ili niži od prethodno ostvarenih</p>
                                    </div>
                                </div>
                                <div>
                                    <label for="inputPeriodIsplateGodinamaMes">Period isplate (u godinama) </label>
                                </div>
                            </div>
                            <div class="form-inner-part left">
                                <div class="input-group plus-minus-input">
                                    <div class="input-group-button">
                                        <button type="button" class="button-minus" data-quantity="minus" data-field="rangeStopaPrinosaMes">
                                        </button>
                                    </div>
                                    <div class="range-wrap">
                                        <output class="bubble" name="rangeStopaPrinosaMes"></output>
                                        <input class="range input-group-field" type="range" id="rangeStopaPrinosaMes" name="rangeStopaPrinosaMes" min="0" max="20" value="4" step="1">
                                    </div>
                                    <div class="input-group-button">
                                        <button type="button" class="button-plus" data-quantity="plus" data-field="rangeStopaPrinosaMes">
                                        </button>
                                    </div>
                                    <div>
                                        <input class="input" name="rangeStopaPrinosaMes" type="number" id="inputStopaPrinosaMes" min="0" max="20" value="4" />
                                    </div>
                                </div>
                                <div>
                                    <label for="inputStopaPrinosaMes">stopa prinosa (na godišnjem nivou) </label>
                                </div>
                            </div>
                            <div class="btn-wrap">
                                <button type="button" id="btnMesecno">IZRAČUNAJ</button>
                            </div>
                            <div class="calculator-description">
                                <h4>Vrednosti u kalkulatoru su prikazane sa
                                    već uračunatim svim naknadama!</h4>
                                <ul>
                                    <li>
                                        <p>Možete da uplaćujete za sebe ili za druge</p>
                                    </li>
                                    <li>
                                        <p>Možete da uplaćujete i za maloletna lica</p>
                                    </li>
                                    <li>
                                        <p>Prethodno ostvareni prinosi ne predstavljaju garanciju budućih
                                            rezultata. Budući prinosi mogu biti viši ili niži od prethodno
                                            ostaverenih.</p>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <div class="form-right">
                        <div class="form-inner">
                            <div class="akumulacija-top">
                                <div class="form-inner-part right">
                                    <label for="inputAkumuliranaSumaMes">Akumulirana suma </label>
                                    <div>
                                        <input type="number" id="inputAkumuliranaSumaMes" />
                                    </div>
                                </div>
                                <div class="form-inner-part right">
                                    <label for="inputIznosIsplateMesecnoMes">Iznos isplate (mesečno) </label>
                                    <div>
                                        <input type="number" id="inputIznosIsplateMesecnoMes" />
                                    </div>
                                </div>
                                <div class="form-inner-part right">
                                    <label for="inputUkupanIznosIsplacenihSredstavaMes">Ukupan iznos isplaćenih sredstava </label>
                                    <div>
                                        <input type="number" id="inputUkupanIznosIsplacenihSredstavaMes" />
                                    </div>
                                </div>
                            </div>
                            <div class="akumulacija-bottom">
                                <h2>AKUMULIRANE SUME</h2>
                                <div class="form-inner-part right">
                                    <label for="inputUlaznaNaknadaClanaMes">Ulazna naknada za uplatu člana </label>
                                    <input type="number" id="inputUlaznaNaknadaClanaMes" />
                                    <div class="info-wrap">
                                        <a data-fancybox data-src="#modalAkumuliraneSume" href="javascript:;" class="btn btn-primary btn-info">
                                            <img src="images/info-icon.svg" alt="">
                                        </a>
                                        <div style="display: none;max-width:280px;" id="modalAkumuliraneSume" class="info-wrap-inner">
                                            <h2 data-selectable="true"><img src="images/info-icon.svg" alt="">INFO</h2>
                                            <p data-selectable="true">Zbir vaših uplata umanjen za naknade</p>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-inner-part right">
                                    <label for="inputUlaznaNaknadaPoslodavcaMes">Ulazna naknada za uplatu poslodavca </label>
                                    <input type="number" id="inputUlaznaNaknadaPoslodavcaMes" />
                                </div>
                                <div class="form-inner-part right">
                                    <label for="inputPeriodAkumulacijeMes">Period akumulacije (u godinama) </label>
                                    <input type="number" id="inputPeriodAkumulacijeMes" />
                                </div>
                                <div class="form-inner-part right">
                                    <label for="inputUkupnoUplacenoClanaMes">Ukupno uplaćeno od strane člana </label>
                                    <input type="number" id="inputUkupnoUplacenoClanaMes" />
                                </div>
                                <div class="form-inner-part right">
                                    <label for="inputUkupnoUplacenoPoslodavcaMes">Ukupno uplaćeno od strane poslodavca </label>
                                    <input type="number" id="inputUkupnoUplacenoPoslodavcaMes" />
                                </div>
                                <div class="form-inner-part right">
                                    <label for="inputAkumuliranaSumaClanaMes">Akumulirana suma (za uplate člana) </label>
                                    <input type="number" id="inputAkumuliranaSumaClanaMes" />
                                </div>
                                <div class="form-inner-part right">
                                    <label for="inputAkumuliranaSumaPoslodavcaMes">Akumulirana suma (za uplate poslodavca) </label>
                                    <input type="number" id="inputAkumuliranaSumaPoslodavcaMes" />
                                </div>
                                <div class="form-inner-part right">
                                    <label for="inputZaradjenoMes">Zarađeno </label>
                                    <input readonly type="number" id="inputZaradjenoMes" />
                                </div>
                            </div>
                        </div>
                        <div class="calculator-description">
                            <p><span>*</span>Kalkulacija je informativnog karaktera, prethodno ostvareni prinosi ne
                                predstavljaju garanciju budućih rezultata. Budući prinosi mogu biti viši ili niži od
                                ranijih.
                            </p>
                            <p><span>*</span>Povlačenje sredstava može početi najranije sa navršenih 58 godina starosti a
                                najkasnije sa navršenih 70 godina</p>
                        </div>
                    </div>
                </div>
                <div class="pie-wrap">
                    <div class="pie-inner" id="chartContainer" style="height: auto; width: 100%;"></div>
                </div>
            </div>
        </div>


        <!--<label for="inputIznosUplateClanaMes">Iznos uplate člana (u rsd) </label><br/>-->
        <!--<input type="range" id="rangeIznosUplateClanaMes" name="rangeIznosUplateClanaMes" min="0" max="1500000" value=5000-->
        <!--step="5000"><br/>-->

        <!--<input type="number" id="inputIznosUplateClanaMes" value=5000/><br/><br/>-->


        <!--<label for="inputIznosUplatePoslodavcaMes">Iznos uplate poslodavca (u rsd) </label><br/>-->
        <!--<input type="range" id="rangeIznosUplatePoslodavcaMes" name="rangeIznosUplatePoslodavcaMes" min="0" max="1500000"-->
        <!--value=0 step="5000"><br/>-->
        <!--<input type="number" id="inputIznosUplatePoslodavcaMes" value=0/><br/><br/>-->


        <!--<label for="inputUlaznaNaknadaClanaMes">Ulazna naknada za uplatu člana </label><br/>-->
        <!--<input type="number" id="inputUlaznaNaknadaClanaMes"/><br/><br/>-->


        <!--<label for="inputUlaznaNaknadaPoslodavcaMes">Ulazna naknada za uplatu poslodavca </label><br/>-->
        <!--<input type="number" id="inputUlaznaNaknadaPoslodavcaMes"/><br/><br/>-->


        <!--<label for="inputGodinaPocetkaUplateMes">godine na početku uplate doprinosa </label><br/>-->
        <!--<input type="range" id="rangeGodinaPocetkaUplateMes" name="rangeGodinaPocetkaUplateMes" min="0" max="100" value=35-->
        <!--step="1"><br/>-->
        <!--<input type="number" id="inputGodinaPocetkaUplateMes" value=35/><br/><br/>-->


        <!--<label for="inputGodinaPovlacenjeMes">godine pri kojima počinje povlačenje sredstava </label><br/>-->
        <!--<input type="range" id="rangeGodinaPovlacenjeMes" name="rangeGodinaPovlacenjeMes" min="0" max="100" value=65-->
        <!--step="1"><br/>-->
        <!--<input type="number" id="inputGodinaPovlacenjeMes" value=65/><br/><br/>-->


        <!--<label for="inputPeriodAkumulacijeMes">Period akumulacije (u godinama) </label><br/>-->
        <!--<input type="number" id="inputPeriodAkumulacijeMes"/><br/><br/>-->


        <!--<label for="inputStopaPrinosaMes">stopa prinosa (na godišnjem nivou) </label><br/>-->
        <!--<input type="range" id="rangeStopaPrinosaMes" name="rangeStopaPrinosaMes" min="0" max="20" value=4 step="1"><br/>-->
        <!--<input type="number" id="inputStopaPrinosaMes" value=4/><br/><br/>-->


        <!--<label for="inputUkupnoUplacenoClanaMes">Ukupno uplaćeno od strane člana </label><br/>-->
        <!--<input type="number" id="inputUkupnoUplacenoClanaMes"/><br/><br/>-->


        <!--<label for="inputUkupnoUplacenoPoslodavcaMes">Ukupno uplaćeno od strane poslodavca </label><br/>-->
        <!--<input type="number" id="inputUkupnoUplacenoPoslodavcaMes"/><br/><br/>-->


        <!--<label for="inputZaradjenoMes">Zarađeno </label><br/>-->
        <!--<input type="number" id="inputZaradjenoMes"/><br/><br/>-->


        <!--<label for="inputAkumuliranaSumaClanaMes">Akumulirana suma (za uplate člana) </label><br/>-->
        <!--<input type="number" id="inputAkumuliranaSumaClanaMes"/><br/><br/>-->


        <!--<label for="inputAkumuliranaSumaPoslodavcaMes">Akumulirana suma (za uplate poslodavca) </label><br/>-->
        <!--<input type="number" id="inputAkumuliranaSumaPoslodavcaMes"/><br/><br/>-->


        <!--<label for="inputAkumuliranaSumaMes">Akumulirana suma </label><br/>-->
        <!--<input type="number" id="inputAkumuliranaSumaMes"/><br/><br/>-->


        <!--<label for="inputPeriodIsplateGodinamaMes">Period isplate (u godinama) </label><br/>-->
        <!--<input type="range" id="rangePeriodIsplateGodinamaMes" name="rangePeriodIsplateGodinamaMes" min="0" max="100"-->
        <!--value=30-->
        <!--step="1"><br/>-->
        <!--<input type="number" id="inputPeriodIsplateGodinamaMes" value=30/><br/><br/>-->


        <!--<label for="inputIznosIsplateMesecnoMes">Iznos isplate (mesečno) </label><br/>-->
        <!--<input type="number" id="inputIznosIsplateMesecnoMes"/><br/><br/>-->


        <!--<label for="inputUkupanIznosIsplacenihSredstavaMes">Ukupan iznos isplaćenih sredstava </label><br/>-->
        <!--<input type="number" id="inputUkupanIznosIsplacenihSredstavaMes"/><br/><br/>-->


        <!--<button type="button" id="btnMesecno">Click Me!</button>-->

    </body>

</html>